(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[3],{438:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return O}));var a=n(2),c=n.n(a),i=n(13),s=n(20),r=n(24),l=n(31),o=n(0),u=n(16),d=n(32),p=n(1),j=l.a.constants.Zero,b={input:{want:j},output:{coll:j},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{want:""},old:{want:""}},x=function(t,e){return l.a.utils.formatUnits(t,e||18)},f=function(t,e){return l.a.utils.parseUnits(t||"0",e||18)};function O(){var t=Object(o.useContext)(u.d).state,e=t.signer,n=t.controller,a=Object(o.useContext)(u.e),l=a.liteState,O=(l.bond,l.want),w=l.coll,h=l.pool,m=l.data,v=a.classesChild,y=a.handleClick;b.tip.apy=m.apy.toPrecision(3);var g=Object(o.useReducer)((function(t,e){return Object(s.a)(Object(s.a)({},t),e)}),b),k=Object(r.a)(g,2),C=k[0],_=k[1];return Object(o.useEffect)((function(){return C==b||_(b)}),[h]),Object(o.useEffect)((function(){Object(i.a)(c.a.mark((function t(){var e,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=f(C.I.want,h.want.decimals)).eq(C.input.want)){t.next=6;break}return t.next=4,h.ct.get_dx(e).catch((function(){return n.notify("balance","insufficient"),!1}));case 4:(a=t.sent)&&(i={fee:(x(a)*(1-x(m.swap.fee))).toFixed(4),min:(.995*x(a)).toFixed(3),slip:n.calc_slip(m,[null,e],h).toPrecision(3),apy:m.apy.toPrecision(3)},_({input:{want:e},output:{coll:a},tip:i}));case 6:case"end":return t.stop()}}),t)})))()}),[C]),Object(o.useMemo)((function(){return Object(p.jsxs)("div",{className:v.root,children:[Object(p.jsxs)("div",{className:v.amount,children:[Object(p.jsx)("div",{children:Object(p.jsx)(d.a,{title:"want",State:{state:C,setState:_,token:O,max:m.balance.want,if_max:m.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(p.jsx)("span",{className:v.icon,children:"navigate_next"}),Object(p.jsx)("div",{children:Object(p.jsx)(d.c,{title:"coll",state:{state:C,token:w},style:{height:"90px"}})})]}),Object(p.jsx)(d.d,{apy:C.tip.apy,info:Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:["Slippage tolerance: ",C.tip.slip," %"]}),Object(p.jsxs)("div",{children:["Minimum recieved: ",C.tip.min," COLL"]}),Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(p.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(p.jsx)("span",{children:O.symbol}),Object(p.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(p.jsx)("span",{children:w.symbol})]}),Object(p.jsxs)("div",{children:["Nominal swap fee: ",C.tip.fee," COLL"]})]})}),Object(p.jsx)("div",{className:v.buttonOne,children:Object(p.jsxs)("div",{children:[Object(p.jsx)(d.j,{name:"Approve",onClick:function(){return y("approve")(O)},disabled:!e||m.allowance.want.gt("100000000000000000000000000000000")}),Object(p.jsx)(d.j,{name:"Lend",onClick:Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y("lend")(C.input.want,C.output.coll);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=_({I:{want:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),disabled:j.eq(C.output.coll)||f(C.I.want,h.want.decimals).gt(m.balance.want)||!f(C.I.want,h.want.decimals).eq(C.input.want)})]})})]})}),[C,m])}}}]);