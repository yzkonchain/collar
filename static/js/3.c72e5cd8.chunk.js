(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[3],{287:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return c});var e=n(3),p=n.n(e),j=n(6),b=n(11),x=n(14),a=n(17),f=n(0),O=n(9),h=n(18),w=n(1),m=a.ethers.constants.Zero,v={input:{want:m},output:{coll:m},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{want:""},old:{want:""}},y=function(t,e){return a.ethers.utils.formatUnits(t,e||18)},g=function(t,e){return a.ethers.utils.parseUnits(t||"0",e||18)};function c(){var t=Object(f.useContext)(O.d).state,e=t.signer,c=t.controller,n=Object(f.useContext)(O.e),t=n.liteState,a=(t.bond,t.want),i=t.coll,s=t.pool,r=t.data,l=n.classesChild,o=n.handleClick;v.tip.apy=r.apy.toPrecision(3);var n=Object(f.useReducer)(function(t,e){return Object(b.a)(Object(b.a)({},t),e)},v),n=Object(x.a)(n,2),u=n[0],d=n[1];return Object(f.useEffect)(function(){return u==v||d(v)},[s]),Object(f.useEffect)(function(){Object(j.a)(p.a.mark(function t(){var e,n,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=g(u.I.want,s.want.decimals)).eq(u.input.want)){t.next=6;break}return t.next=4,s.ct.get_dx(e).catch(function(){return c.notify("balance","insufficient"),!1});case 4:(n=t.sent)&&(a={fee:(y(n)*(1-y(r.swap.fee))).toFixed(4),min:(.995*y(n)).toFixed(3),slip:c.calc_slip(r,[null,e],s).toPrecision(3),apy:r.apy.toPrecision(3)},d({input:{want:e},output:{coll:n},tip:a}));case 6:case"end":return t.stop()}},t)}))()},[u]),Object(f.useMemo)(function(){return Object(w.jsxs)("div",{className:l.root,children:[Object(w.jsxs)("div",{className:l.amount,children:[Object(w.jsx)("div",{children:Object(w.jsx)(h.a,{title:"want",State:{state:u,setState:d,token:a,max:r.balance.want,if_max:r.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(w.jsx)("span",{className:l.icon,children:"navigate_next"}),Object(w.jsx)("div",{children:Object(w.jsx)(h.c,{title:"coll",state:{state:u,token:i},style:{height:"90px"}})})]}),Object(w.jsx)(h.d,{apy:u.tip.apy,info:Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{children:["Slippage tolerance: ",u.tip.slip," %"]}),Object(w.jsxs)("div",{children:["Minimum recieved: ",u.tip.min," COLL"]}),Object(w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(w.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(w.jsx)("span",{children:a.symbol}),Object(w.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(w.jsx)("span",{children:i.symbol})]}),Object(w.jsxs)("div",{children:["Nominal swap fee: ",u.tip.fee," COLL"]})]})}),Object(w.jsx)("div",{className:l.buttonOne,children:Object(w.jsxs)("div",{children:[Object(w.jsx)(h.j,{name:"Approve",onClick:function(){return o("approve")(a)},disabled:!e||r.allowance.want.gt("100000000000000000000000000000000")}),Object(w.jsx)(h.j,{name:"Lend",onClick:Object(j.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o("lend")(u.input.want,u.output.coll);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=d({I:{want:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t)})),disabled:m.eq(u.output.coll)||g(u.I.want,s.want.decimals).gt(r.balance.want)||!g(u.I.want,s.want.decimals).eq(u.input.want)})]})})]})},[u,r])}}}]);