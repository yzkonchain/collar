(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[0],{284:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var t=n(3),j=n.n(t),p=n(6),x=n(11),O=n(15),h=n(20),m=n(0),f=n(8),w=n(17),v=n(27),y=n(1),k=h.ethers.constants.Zero,g={input:{bond:k},output:{want:k},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{bond:""},old:{bond:""}},_=function(e,t){return h.ethers.utils.formatUnits(e,t||18)};function s(){var e=Object(m.useContext)(f.d).state,t=e.signer,c=e.controller,n=Object(m.useContext)(f.e),e=n.liteState,r=e.pool,s=e.bond,a=e.want,i=e.coll,o=e.data,l=n.classesChild,d=(n.setLiteState,n.handleClick);g.tip.apy=o.apy.toPrecision(3);var n=Object(m.useReducer)(function(e,t){return Object(x.a)(Object(x.a)({},e),t)},g),n=Object(O.a)(n,2),b=n[0],u=n[1];return Object(m.useEffect)(function(){return b==g||u(g)},[r]),Object(m.useEffect)(function(){t&&!k.eq(o.swap.sk)&&Object(p.a)(j.a.mark(function e(){var s,a,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.I.bond,n=r.bond.decimals,(s=h.ethers.utils.parseUnits(t||"0",n||18)).eq(b.input.bond)){e.next=6;break}return e.next=4,c.get_dy(s,r);case 4:(a=e.sent)&&(i={fee:(_(a,r.want.decimals)*(1-_(o.swap.fee))).toFixed(4),min:(.995*_(a,r.want.decimals)).toFixed(3),slip:c.calc_slip(o,[s,null],r).toPrecision(3),apy:o.apy.toPrecision(3)},u({input:{bond:s},output:{want:a},tip:i}));case 6:case"end":return e.stop()}var t,n},e)}))()},[b]),Object(m.useMemo)(function(){return Object(y.jsxs)("div",{className:l.root,children:[Object(y.jsxs)("div",{className:l.amount,children:[Object(y.jsx)("div",{children:Object(y.jsx)(w.a,{title:"bond",State:{state:b,setState:u,token:s,max:o.balance.bond,if_max:o.allowance.bond.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(y.jsx)("img",{alt:"",src:v.b,className:l.icon}),Object(y.jsx)("div",{children:Object(y.jsx)(w.c,{title:"want",state:{state:b,token:a},style:{height:"90px"}})})]}),Object(y.jsx)(w.d,{apy:b.tip.apy,info:Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{children:["Slippage tolerance: ",b.tip.slip," %"]}),Object(y.jsxs)("div",{children:["Minimum recieved: ",b.tip.min," ",a.symbol]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(y.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(y.jsx)("span",{children:s.symbol}),Object(y.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(y.jsx)("span",{children:i.symbol}),Object(y.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(y.jsx)("span",{children:a.symbol})]}),Object(y.jsxs)("div",{children:["Nominal swap fee: ",b.tip.fee," ",a.symbol]})]})}),Object(y.jsx)("div",{className:l.buttonOne,children:Object(y.jsxs)("div",{children:[Object(y.jsx)(w.j,{name:"Approve",onClick:function(){return d("approve")(s.addr)},disabled:!t||o.allowance.bond.gt("100000000000000000000000000000000")}),Object(y.jsx)(w.j,{name:"Deposit & Borrow",onClick:Object(p.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("borrow")(b.input.bond,b.output.want);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=u({I:{bond:""}});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)})),disabled:k.eq(b.output.want)})]})})]})},[b,o])}}}]);