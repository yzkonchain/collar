(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[4],{439:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var a=n(2),c=n.n(a),l=n(13),s=n(20),i=n(24),r=n(31),o=n(0),b=n(16),d=n(32),u=n(1),p=r.a.constants.Zero,j={input:{want:p,coll:p},output:{bond:p},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{want:"",coll:""},old:{want:"",coll:""}},x=function(e,t){return r.a.utils.formatUnits(e,t||18)},m=function(e,t){return r.a.utils.parseUnits(e||"0",t||18)};function O(){var e=Object(o.useContext)(b.d).state,t=e.signer,n=e.controller,a=Object(o.useContext)(b.e),r=a.liteState,O=r.bond,h=r.want,f=r.coll,w=r.pool,y=r.data,v=a.classesChild,g=a.handleClick;j.tip.apy=y.apy.toPrecision(3);var k=Object(o.useReducer)((function(e,t){return Object(s.a)(Object(s.a)({},e),t)}),j),_=Object(i.a)(k,2),C=_[0],N=_[1];return Object(o.useEffect)((function(){return C==j||N(j)}),[w]),Object(o.useEffect)((function(){Object(l.a)(c.a.mark((function e(){var t,a,l,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=m(C.I.want,w.want.decimals),a=m(C.I.coll),t.eq(C.input.want)&&a.eq(C.input.coll)||(l=t.add(a),s={fee:(x(t,w.want.decimals)*(1-x(y.swap.fee))).toFixed(4),min:(.995*x(l,w.bond.decimals)).toFixed(3),slip:n.calc_slip(y,[l,null],w).toPrecision(3),apy:y.apy.toPrecision(3)},N({input:{want:t,coll:a},output:{bond:l},tip:s}));case 3:case"end":return e.stop()}}),e)})))()}),[C]),Object(o.useMemo)((function(){return Object(u.jsxs)("div",{className:v.root,children:[Object(u.jsxs)("div",{className:v.amount,children:[Object(u.jsx)("div",{children:Object(u.jsx)(d.b,{title:["want","coll"],State:{state:C,setState:N,token:[h,f],max:[y.balance.want.lt(y.balance.call.sub(C.input.coll))?y.balance.want:y.balance.call.sub(C.input.coll),y.balance.coll.lt(y.balance.call.sub(C.input.want))?y.balance.coll:y.balance.call.sub(C.input.want)],if_max:[y.allowance.want.gt("100000000000000000000000000000000"),y.balance.coll.gt("0")]},style:{height:"90px"}})}),Object(u.jsx)("span",{className:v.icon,children:"navigate_next"}),Object(u.jsx)("div",{children:Object(u.jsx)(d.c,{title:"bond",state:{state:C,token:O},style:{height:"90px"}})})]}),Object(u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(u.jsxs)("div",{style:{margin:"10px 0",fontFamily:"Helvetica",fontSize:"12px"},children:["Maximum debt = ",x(y.balance.call)," ",h.symbol]}),Object(u.jsx)(d.d,{apy:C.tip.apy,info:Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:["Slippage tolerance: ",C.tip.slip," %"]}),Object(u.jsxs)("div",{children:["Minimum recieved: ",C.tip.min," ",O.symbol]}),Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(u.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(u.jsx)("span",{children:f.symbol}),Object(u.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(u.jsx)("span",{children:O.symbol}),Object(u.jsx)("span",{style:{margin:"0 5px"},children:"/"}),Object(u.jsx)("span",{children:h.symbol}),Object(u.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(u.jsx)("span",{children:O.symbol})]}),Object(u.jsxs)("div",{children:["Nominal swap fee: ",C.tip.fee," ",h.symbol]})]})})]}),Object(u.jsx)("div",{className:v.buttonOne,children:Object(u.jsxs)("div",{children:[Object(u.jsx)(d.j,{name:"Approve",onClick:function(){return g("approve")(h)},disabled:!t||y.allowance.want.gt("100000000000000000000000000000000")}),Object(u.jsx)(d.j,{name:"Repay",onClick:Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("repay")(C.input.want,C.input.coll);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=N({I:{want:"",coll:""}});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),disabled:p.eq(C.output.bond)})]})})]})}),[C,y])}}}]);