(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[1],{285:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var e=n(3),j=n.n(e),d=n(6),b=n(11),x=n(15),c=n(20),h=n(0),O=n(8),f=n(17),w=n(27),m=n(1),v=c.ethers.constants.Zero,k={input:{want:v,coll:v},output:{clpt:v},tip:{share:0,poolBalance:0,slip:0},I:{want:"",coll:""},old:{want:"",coll:""}},g=function(t,e){return c.ethers.utils.formatUnits(t,e||18)},C=function(t,e){return c.ethers.utils.parseUnits(t||"0",e||18)};function a(){var t=Object(h.useContext)(O.d).state,e=t.signer,s=t.controller,n=Object(h.useContext)(O.e),t=n.liteState,c=(t.bond,t.want),a=t.coll,l=t.pool,i=t.data,o=n.classesChild,r=(n.setLiteState,n.handleClick),n=Object(h.useReducer)(function(t,e){return Object(b.a)(Object(b.a)({},t),e)},k),n=Object(x.a)(n,2),u=n[0],p=n[1];return Object(h.useEffect)(function(){return u==k||p(k)},[l]),Object(h.useEffect)(function(){e&&!v.eq(i.swap.sk)&&Object(d.a)(j.a.mark(function t(){var e,n,c,a;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=C(u.I.want,l.want.decimals),n=C(u.I.coll),e.eq(u.input.want)&&n.eq(u.input.coll)){t.next=7;break}return t.next=5,s.get_dk(n,e,l);case 5:(c=t.sent)&&(a={share:(g(c)/g(i.swap.sk)*100).toPrecision(3),poolBalance:(g(i.swap.sx)/g(i.swap.sy,l.want.decimals)).toPrecision(3),slip:s.calc_slip(i,[n,e],l).toPrecision(3)},p({input:{want:e,coll:n},output:{clpt:c},tip:a}));case 7:case"end":return t.stop()}},t)}))()},[u]),Object(h.useMemo)(function(){return Object(m.jsxs)("div",{className:o.root,children:[Object(m.jsxs)("div",{className:o.amount,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(f.a,{title:"want",State:{state:u,setState:p,token:c,max:i.balance.want,if_max:i.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}}),Object(m.jsx)(f.a,{title:"coll",State:{state:u,setState:p,token:a,max:i.balance.coll,if_max:i.balance.coll.gt("0")},style:{height:"90px"}})]}),Object(m.jsx)("img",{alt:"",src:w.b,className:o.icon}),Object(m.jsx)("div",{children:Object(m.jsx)(f.c,{title:"clpt",state:{state:u,token:l},style:{height:"239px"}})})]}),Object(m.jsx)(f.d,{apy:"todo",info:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:["Share of Pool: ",u.tip.share," %"]}),Object(m.jsxs)("div",{children:["Pool Balance: ","1 ".concat(c.symbol," = ").concat(u.tip.poolBalance," COLL")]}),Object(m.jsxs)("div",{children:["Slippage tolerance: ",u.tip.slip," %"]})]})}),Object(m.jsxs)("div",{className:o.buttonTwo,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(f.j,{name:"Approve",onClick:function(){return r("approve")(c.addr)},disabled:!e||i.allowance.want.gt("100000000000000000000000000000000")}),Object(m.jsx)(f.j,{name:"Deposit",onClick:Object(d.a)(j.a.mark(function t(){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("deposit")(u.input.want,u.input.coll,u.output.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=p({I:{want:"",coll:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t)})),disabled:v.eq(u.output.clpt)})]}),Object(m.jsx)("div",{children:Object(m.jsx)(f.j,{name:"Claim",onClick:function(){return r("claim")()},disabled:v.eq(i.earned.collar)})})]})]})},[u,i])}}}]);