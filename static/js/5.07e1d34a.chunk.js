(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[5],{289:function(t,e,c){"use strict";c.r(e),c.d(e,"default",function(){return a});var e=c(3),u=c.n(e),d=c(6),b=c(11),j=c(14),n=c(17),x=c(0),f=c(9),h=c(18),O=c(1),w=n.ethers.constants.Zero,m={input:{clpt:w},output:{want:w,coll:w},tip:{share:"0.000",poolBalance:"0.00",fee:"0.0000",rate:{coll:0,want:0}},I:{clpt:""},old:{clpt:""}},v=function(t,e){return n.ethers.utils.formatUnits(t,e||18)},k=function(t,e){return n.ethers.utils.parseUnits(t||"0",e||18)};function a(){var t=Object(x.useContext)(f.d).state,a=(t.signer,t.controller),e=Object(x.useContext)(f.e),t=e.liteState,c=(t.bond,t.want),n=t.coll,s=t.pool,i=t.data,r=e.classesChild,l=e.handleClick,e=Object(x.useReducer)(function(t,e){return Object(b.a)(Object(b.a)({},t),e)},m),e=Object(j.a)(e,2),o=e[0],p=e[1];return Object(x.useEffect)(function(){return o==m||p(m)},[s]),Object(x.useEffect)(function(){Object(d.a)(u.a.mark(function t(){var e,c,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=k(o.I.clpt)).eq(o.input.clpt)){t.next=6;break}return t.next=4,s.ct.get_dxdy(e).catch(function(t){return a.notify("balance","insufficient"),!1});case 4:(c=t.sent)&&(n={poolBalance:(v(i.swap.sx)/v(i.swap.sy,s.want.decimals)).toPrecision(3),share:(v(i.balance.clpt)/v(i.swap.sk)*100).toPrecision(3),rate:{coll:e.eq(w)?0:parseFloat(v(c[0])/o.I.clpt).toPrecision(3),want:e.eq(w)?0:parseFloat(v(c[1],s.want.decimals)/o.I.clpt).toPrecision(3)},fee:(v(c[0])*(1-v(i.swap.fee))).toFixed(4)},p({input:{clpt:e},output:{coll:c[0],want:c[1]},tip:n}));case 6:case"end":return t.stop()}},t)}))()},[o]),Object(x.useMemo)(function(){return Object(O.jsxs)("div",{className:r.root,children:[Object(O.jsxs)("div",{className:r.amount,children:[Object(O.jsx)("div",{children:Object(O.jsx)(h.a,{title:"clpt",State:{state:o,setState:p,token:s,max:i.balance.clpt,if_max:i.balance.clpt.gt("0")},style:{height:"239px"}})}),Object(O.jsx)("span",{className:r.icon,children:"navigate_next"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(h.c,{title:"want",state:{state:o,token:c},style:{height:"90px"}}),Object(O.jsx)(h.c,{title:"coll",state:{state:o,token:n},style:{height:"90px"}})]})]}),Object(O.jsx)(h.d,{apy:"todo",info:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:["Exchange Rate: ","1CLPT = ".concat(o.tip.rate.want," ").concat(c.symbol," + ").concat(o.tip.rate.coll," COLL")]}),Object(O.jsxs)("div",{children:["Share of Pool: ",o.tip.share," %"]}),Object(O.jsxs)("div",{children:["Pool Balance: ","1 ".concat(c.symbol," = ").concat(o.tip.poolBalance," COLL")]}),Object(O.jsxs)("div",{children:["Nominal swap fee: ",o.tip.fee," COLL"]})]})}),Object(O.jsxs)("div",{className:r.buttonTwo,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(h.j,{name:"Withdraw",onClick:Object(d.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("withdraw")(o.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=p({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t)})),disabled:w.eq(o.output.want)||k(o.I.clpt).gt(i.balance.clpt)||!k(o.I.clpt).eq(o.input.clpt)}),Object(O.jsx)(h.j,{name:"Claim",onClick:function(){return l("claim")()},disabled:w.eq(i.earned.collar)})]}),Object(O.jsx)("div",{children:Object(O.jsx)(h.j,{name:"Withdraw & Claim",onClick:Object(d.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("burn_and_claim")(o.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=p({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t)})),disabled:w.eq(o.output.want)||w.eq(i.earned.collar)||k(o.I.clpt).gt(i.balance.clpt)||!k(o.I.clpt).eq(o.input.clpt)})})]})]})},[o,i])}}}]);