(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[1],{292:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return c});var e=n(3),d=n.n(e),j=n(6),b=n(11),h=n(13),a=n(18),w=n(0),x=n(7),f=n(17),O=n(1),m=a.ethers.constants.Zero,g={input:{want:m,coll:m},output:{clpt:m},tip:{share:0,poolBalance:0,slip:0},I:{want:"",coll:""},old:{want:"",coll:""}},v=function(t,e){return a.ethers.utils.formatUnits(t,e||18)},k=function(t,e){return a.ethers.utils.parseUnits(t||"0",e||18)};function c(){var t=Object(w.useContext)(x.d).state,e=t.signer,l=t.controller,n=Object(w.useContext)(x.e),t=n.liteState,a=(t.bond,t.want),c=t.coll,s=t.pool,i=t.data,o=n.classesChild,r=n.handleClick,n=Object(w.useReducer)(function(t,e){return Object(b.a)(Object(b.a)({},t),e)},g),n=Object(h.a)(n,2),u=n[0],p=n[1];return Object(w.useEffect)(function(){return u==g||p(g)},[s]),Object(w.useEffect)(function(){Object(j.a)(d.a.mark(function t(){var e,n,a,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=k(u.I.want,s.want.decimals),n=k(u.I.coll),e.eq(u.input.want)&&n.eq(u.input.coll)){t.next=7;break}return t.next=5,s.ct.get_dk(n,e).catch(function(){return(u.I.want.length>u.old.want.length&&u.I.want.length<v(u.input.want).length||u.I.coll.length>u.old.coll.length&&u.I.coll.length<v(u.input.coll).length)&&l.notify("balance","insufficient"),!1});case 5:(a=t.sent)&&(c={share:(v(a)/v(i.swap.sk)*100).toPrecision(3),poolBalance:(v(i.swap.sx)/v(i.swap.sy,s.want.decimals)).toPrecision(3),slip:l.calc_slip(i,[n,e],s).toPrecision(3)},p({input:{want:e,coll:n},output:{clpt:a},tip:c}));case 7:case"end":return t.stop()}},t)}))()},[u]),Object(w.useMemo)(function(){return Object(O.jsxs)("div",{className:o.root,children:[Object(O.jsxs)("div",{className:o.amount,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(f.a,{title:"want",State:{state:u,setState:p,token:a,max:i.balance.want,if_max:i.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}}),Object(O.jsx)(f.a,{title:"coll",State:{state:u,setState:p,token:c,max:i.balance.coll,if_max:i.balance.coll.gt("0")},style:{height:"90px"}})]}),Object(O.jsx)("span",{className:o.icon,children:"navigate_next"}),Object(O.jsx)("div",{children:Object(O.jsx)(f.c,{title:"clpt",state:{state:u,token:s},style:{height:"239px"}})})]}),Object(O.jsx)(f.d,{apy:(100*i.farm_apy).toFixed(1),info:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:["Share of Pool: ",u.tip.share," %"]}),Object(O.jsxs)("div",{children:["Pool Balance: ","1 ".concat(a.symbol," = ").concat(u.tip.poolBalance," COLL")]}),Object(O.jsxs)("div",{children:["Slippage tolerance: ",u.tip.slip," %"]})]})}),Object(O.jsxs)("div",{className:o.buttonTwo,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(f.j,{name:"Approve",onClick:function(){return r("approve")(a)},disabled:!e||i.allowance.want.gt("100000000000000000000000000000000")}),Object(O.jsx)(f.j,{name:"Deposit",onClick:Object(j.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("deposit")(u.input.want,u.input.coll,u.output.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=p({I:{want:"",coll:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t)})),disabled:m.eq(u.output.clpt)||k(u.I.want,s.want.decimals).gt(i.balance.want)||k(u.I.coll).gt(i.balance.coll)||!k(u.I.want,s.want.decimals).eq(u.input.want)||!k(u.I.coll).eq(u.input.coll)})]}),Object(O.jsx)("div",{children:Object(O.jsx)(f.j,{name:"Claim",onClick:function(){return r("claim")()},disabled:m.eq(i.earned.collar)})})]})]})},[u,i])}}}]);