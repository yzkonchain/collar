(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[0],{435:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var s=n(2),a=n.n(s),i=n(13),c=n(20),r=n(24),o=n(31),l=n(0),d=n(16),b=n(32),u=n(46),j=n(1),p=o.a.constants.Zero,x={input:{bond:p},output:{want:p},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{bond:""},old:{bond:""}},f=function(e,t){return o.a.utils.formatUnits(e,t||18)},m=function(e,t){return o.a.utils.parseUnits(e||"0",t||18)};function O(){var e=Object(l.useContext)(d.d).state,t=e.signer,n=e.controller,s=Object(l.useContext)(d.e),o=s.liteState,O=o.pool,h=o.bond,w=o.want,v=o.coll,y=o.data,g=s.classesChild,k=(s.setLiteState,s.handleClick);x.tip.apy=y.apy.toPrecision(3);var _=Object(l.useReducer)((function(e,t){return Object(c.a)(Object(c.a)({},e),t)}),x),N=Object(r.a)(_,2),C=N[0],I=N[1];return Object(l.useEffect)((function(){return C==x||I(x)}),[O]),Object(l.useEffect)((function(){Object(i.a)(a.a.mark((function e(){var t,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=m(C.I.bond,O.bond.decimals)).eq(C.input.bond)){e.next=6;break}return e.next=4,O.ct.get_dy(t).catch((function(e){return n.notify("balance","insufficient"),!1}));case 4:(s=e.sent)&&(i={fee:(f(s,O.want.decimals)*(1-f(y.swap.fee))).toFixed(4),min:(.995*f(s,O.want.decimals)).toFixed(3),slip:n.calc_slip(y,[t,null],O).toPrecision(3),apy:y.apy.toPrecision(3)},I({input:{bond:t},output:{want:s},tip:i}));case 6:case"end":return e.stop()}}),e)})))()}),[C]),Object(l.useMemo)((function(){return Object(j.jsxs)("div",{className:g.root,children:[Object(j.jsxs)("div",{className:g.amount,children:[Object(j.jsx)("div",{children:Object(j.jsx)(b.a,{title:"bond",State:{state:C,setState:I,token:h,max:y.balance.bond,if_max:y.allowance.bond.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(j.jsx)("img",{alt:"",src:u.b,className:g.icon}),Object(j.jsx)("div",{children:Object(j.jsx)(b.c,{title:"want",state:{state:C,token:w},style:{height:"90px"}})})]}),Object(j.jsx)(b.d,{apy:C.tip.apy,info:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["Slippage tolerance: ",C.tip.slip," %"]}),Object(j.jsxs)("div",{children:["Minimum recieved: ",C.tip.min," ",w.symbol]}),Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(j.jsx)("span",{children:h.symbol}),Object(j.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(j.jsx)("span",{children:v.symbol}),Object(j.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(j.jsx)("span",{children:w.symbol})]}),Object(j.jsxs)("div",{children:["Nominal swap fee: ",C.tip.fee," ",w.symbol]})]})}),Object(j.jsx)("div",{className:g.buttonOne,children:Object(j.jsxs)("div",{children:[Object(j.jsx)(b.j,{name:"Approve",onClick:function(){return k("approve")(h)},disabled:!t||y.allowance.bond.gt("100000000000000000000000000000000")}),Object(j.jsx)(b.j,{name:"Deposit & Borrow",onClick:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("borrow")(C.input.bond,C.output.want);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=I({I:{bond:""}});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),disabled:p.eq(C.output.want)||m(C.I.bond,O.bond.decimals).gt(y.balance.bond)||!m(C.I.bond,O.bond.decimals).eq(C.input.bond)})]})})]})}),[C,y])}}}]);