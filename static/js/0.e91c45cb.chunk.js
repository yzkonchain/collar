(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[0],{435:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n(2),i=n.n(a),s=n(13),c=n(20),r=n(24),o=n(31),l=n(0),d=n(16),b=n(32),u=n(1),p=o.a.constants.Zero,j={input:{bond:p},output:{want:p},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{bond:""},old:{bond:""}},x=function(e,t){return o.a.utils.formatUnits(e,t||18)},f=function(e,t){return o.a.utils.parseUnits(e||"0",t||18)};function m(){var e=Object(l.useContext)(d.d).state.controller,t=Object(l.useContext)(d.e),n=t.liteState,a=n.pool,o=n.bond,m=n.want,O=n.coll,h=n.data,w=t.classesChild,v=t.handleClick;j.tip.apy=h.apy.toPrecision(3);var y=Object(l.useReducer)((function(e,t){return Object(c.a)(Object(c.a)({},e),t)}),j),g=Object(r.a)(y,2),k=g[0],_=g[1];return Object(l.useEffect)((function(){return k==j||_(j)}),[a]),Object(l.useEffect)((function(){Object(s.a)(i.a.mark((function t(){var n,s,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=f(k.I.bond,a.bond.decimals)).eq(k.input.bond)){t.next=6;break}return t.next=4,a.ct.get_dy(n).catch((function(t){return e.notify("balance","insufficient"),!1}));case 4:(s=t.sent)&&(c={fee:(x(s,a.want.decimals)*(1-x(h.swap.fee))).toFixed(4),min:(.995*x(s,a.want.decimals)).toFixed(3),slip:e.calc_slip(h,[n,null],a).toPrecision(3),apy:h.apy.toPrecision(3)},_({input:{bond:n},output:{want:s},tip:c}));case 6:case"end":return t.stop()}}),t)})))()}),[k]),Object(l.useMemo)((function(){return Object(u.jsxs)("div",{className:w.root,children:[Object(u.jsxs)("div",{className:w.amount,children:[Object(u.jsx)("div",{children:Object(u.jsx)(b.a,{title:"bond",State:{state:k,setState:_,token:o,max:h.balance.bond,if_max:h.allowance.bond.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(u.jsx)("span",{className:w.icon,children:"navigate_next"}),Object(u.jsx)("div",{children:Object(u.jsx)(b.c,{title:"want",state:{state:k,token:m},style:{height:"90px"}})})]}),Object(u.jsx)(b.d,{apy:k.tip.apy,info:Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:["Slippage tolerance: ",k.tip.slip," %"]}),Object(u.jsxs)("div",{children:["Minimum recieved: ",k.tip.min," ",m.symbol]}),Object(u.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(u.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(u.jsx)("span",{children:o.symbol}),Object(u.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(u.jsx)("span",{children:O.symbol}),Object(u.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(u.jsx)("span",{children:m.symbol})]}),Object(u.jsxs)("div",{children:["Nominal swap fee: ",k.tip.fee," ",m.symbol]})]})}),Object(u.jsx)("div",{className:w.buttonOne,children:Object(u.jsxs)("div",{children:[Object(u.jsx)(b.j,{name:"Approve",onClick:function(){return v("approve")(o)},disabled:!a.ct.signer||h.allowance.bond.gt("100000000000000000000000000000000")}),Object(u.jsx)(b.j,{name:"Deposit & Borrow",onClick:Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("borrow")(k.input.bond,k.output.want);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=_({I:{bond:""}});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),disabled:p.eq(k.output.want)||f(k.I.bond,a.bond.decimals).gt(h.balance.bond)||!f(k.I.bond,a.bond.decimals).eq(k.input.bond)})]})})]})}),[k,h])}}}]);