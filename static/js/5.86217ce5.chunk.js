(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[5],{289:function(t,e,c){"use strict";c.r(e),c.d(e,"default",function(){return a});var e=c(3),d=c.n(e),j=c(6),b=c(11),x=c(15),h=c(20),f=c(0),O=c(8),w=c(17),m=c(27),v=c(1),k=h.ethers.constants.Zero,C={input:{clpt:k},output:{want:k,coll:k},tip:{share:"0.000",poolBalance:"0.00",fee:"0.0000",rate:{coll:0,want:0}},I:{clpt:""},old:{clpt:""}},g=function(t,e){return h.ethers.utils.formatUnits(t,e||18)};function a(){var t=Object(f.useContext)(O.d).state,e=t.signer,s=t.controller,c=Object(f.useContext)(O.e),t=c.liteState,a=(t.bond,t.want),n=t.coll,r=t.pool,i=t.data,l=c.classesChild,o=(c.setLiteState,c.handleClick),c=Object(f.useReducer)(function(t,e){return Object(b.a)(Object(b.a)({},t),e)},C),c=Object(x.a)(c,2),u=c[0],p=c[1];return Object(f.useEffect)(function(){return u==C||p(C)},[r]),Object(f.useEffect)(function(){e&&!k.eq(i.swap.sk)&&Object(j.a)(d.a.mark(function t(){var c,a,n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=u.I.clpt,(c=h.ethers.utils.parseUnits(e||"0",18)).eq(u.input.clpt)){t.next=7;break}return t.next=4,s.ct(r.addr).get_dxdy(c);case 4:a=t.sent,n={poolBalance:(g(i.swap.sx)/g(i.swap.sy,r.want.decimals)).toPrecision(3),share:(g(i.balance.clpt)/g(i.swap.sk)*100).toPrecision(3),rate:{coll:c.eq(k)?0:parseFloat(g(a[0])/u.I.clpt).toPrecision(3),want:c.eq(k)?0:parseFloat(g(a[1],r.want.decimals)/u.I.clpt).toPrecision(3)},fee:(g(a[0])*(1-g(i.swap.fee))).toFixed(4)},p({input:{clpt:c},output:{coll:a[0],want:a[1]},tip:n});case 7:case"end":return t.stop()}var e},t)}))()},[u]),Object(f.useMemo)(function(){return Object(v.jsxs)("div",{className:l.root,children:[Object(v.jsxs)("div",{className:l.amount,children:[Object(v.jsx)("div",{children:Object(v.jsx)(w.a,{title:"clpt",State:{state:u,setState:p,token:r,max:i.balance.clpt,if_max:i.balance.clpt.gt("0")},style:{height:"239px"}})}),Object(v.jsx)("img",{alt:"",src:m.b,className:l.icon}),Object(v.jsxs)("div",{children:[Object(v.jsx)(w.c,{title:"want",state:{state:u,token:a},style:{height:"90px"}}),Object(v.jsx)(w.c,{title:"coll",state:{state:u,token:n},style:{height:"90px"}})]})]}),Object(v.jsx)(w.d,{apy:"todo",info:Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:["Exchange Rate: ","1CLPT = ".concat(u.tip.rate.want," ").concat(a.symbol," + ").concat(u.tip.rate.coll," COLL")]}),Object(v.jsxs)("div",{children:["Share of Pool: ",u.tip.share," %"]}),Object(v.jsxs)("div",{children:["Pool Balance: ","1 ".concat(a.symbol," = ").concat(u.tip.poolBalance," COLL")]}),Object(v.jsxs)("div",{children:["Nominal swap fee: ",u.tip.fee," COLL"]})]})}),Object(v.jsxs)("div",{className:l.buttonTwo,children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(w.j,{name:"Withdraw",onClick:Object(j.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o("withdraw")(u.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=p({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t)})),disabled:k.eq(u.output.want)}),Object(v.jsx)(w.j,{name:"Claim",onClick:function(){return o("claim")()},disabled:k.eq(i.earned.collar)})]}),Object(v.jsx)("div",{children:Object(v.jsx)(w.j,{name:"Withdraw & Claim",onClick:Object(j.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o("burn_and_claim")(u.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=p({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}},t)})),disabled:k.eq(u.output.want)||k.eq(i.earned.collar)})})]})]})},[u,i])}}}]);