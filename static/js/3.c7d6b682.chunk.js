(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[3],{438:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return w}));var a=n(2),c=n.n(a),i=n(13),s=n(20),r=n(24),l=n(31),o=n(0),u=n(16),p=n(32),d=n(46),j=n(1),b=l.a.constants.Zero,x={input:{want:b},output:{coll:b},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{want:""},old:{want:""}},f=function(t,e){return l.a.utils.formatUnits(t,e||18)},O=function(t,e){return l.a.utils.parseUnits(t||"0",e||18)};function w(){var t=Object(o.useContext)(u.d).state,e=t.signer,n=t.controller,a=Object(o.useContext)(u.e),l=a.liteState,w=(l.bond,l.want),h=l.coll,m=l.pool,v=l.data,y=a.classesChild,g=(a.setLiteState,a.handleClick);x.tip.apy=v.apy.toPrecision(3);var k=Object(o.useReducer)((function(t,e){return Object(s.a)(Object(s.a)({},t),e)}),x),C=Object(r.a)(k,2),I=C[0],L=C[1];return Object(o.useEffect)((function(){return I==x||L(x)}),[m]),Object(o.useEffect)((function(){e&&!b.eq(v.swap.sk)&&Object(i.a)(c.a.mark((function t(){var e,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=O(I.I.want,m.want.decimals)).eq(I.input.want)){t.next=6;break}return t.next=4,m.ct.get_dx(e).catch((function(){return n.notify("balance","insufficient"),!1}));case 4:(a=t.sent)&&(i={fee:(f(a)*(1-f(v.swap.fee))).toFixed(4),min:(.995*f(a)).toFixed(3),slip:n.calc_slip(v,[null,e],m).toPrecision(3),apy:v.apy.toPrecision(3)},L({input:{want:e},output:{coll:a},tip:i}));case 6:case"end":return t.stop()}}),t)})))()}),[I]),Object(o.useMemo)((function(){return Object(j.jsxs)("div",{className:y.root,children:[Object(j.jsxs)("div",{className:y.amount,children:[Object(j.jsx)("div",{children:Object(j.jsx)(p.a,{title:"want",State:{state:I,setState:L,token:w,max:v.balance.want,if_max:v.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(j.jsx)("img",{alt:"",src:d.b,className:y.icon}),Object(j.jsx)("div",{children:Object(j.jsx)(p.c,{title:"coll",state:{state:I,token:h},style:{height:"90px"}})})]}),Object(j.jsx)(p.d,{apy:I.tip.apy,info:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["Slippage tolerance: ",I.tip.slip," %"]}),Object(j.jsxs)("div",{children:["Minimum recieved: ",I.tip.min," COLL"]}),Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(j.jsx)("span",{children:w.symbol}),Object(j.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(j.jsx)("span",{children:h.symbol})]}),Object(j.jsxs)("div",{children:["Nominal swap fee: ",I.tip.fee," COLL"]})]})}),Object(j.jsx)("div",{className:y.buttonOne,children:Object(j.jsxs)("div",{children:[Object(j.jsx)(p.j,{name:"Approve",onClick:function(){return g("approve")(w)},disabled:!e||v.allowance.want.gt("100000000000000000000000000000000")}),Object(j.jsx)(p.j,{name:"Lend",onClick:Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g("lend")(I.input.want,I.output.coll);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=L({I:{want:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),disabled:b.eq(I.output.coll)||O(I.I.want,m.want.decimals).gt(v.balance.want)||!O(I.I.want,m.want.decimals).eq(I.input.want)})]})})]})}),[I,v])}}}]);