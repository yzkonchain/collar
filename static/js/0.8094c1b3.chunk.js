(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[0],{287:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var t=n(3),u=n.n(t),p=n(6),j=n(11),h=n(14),s=n(17),x=n(0),f=n(8),m=n(19),O=n(1),w=s.ethers.constants.Zero,v={input:{bond:w},output:{want:w},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{bond:""},old:{bond:""}},y=function(e,t){return s.ethers.utils.formatUnits(e,t||18)},g=function(e,t){return s.ethers.utils.parseUnits(e||"0",t||18)};function i(){var i=Object(x.useContext)(f.d).state.controller,e=Object(x.useContext)(f.e),t=e.liteState,c=t.pool,n=t.bond,s=t.want,a=t.coll,o=t.data,r=e.classesChild,l=e.handleClick;v.tip.apy=o.apy.toPrecision(3);var e=Object(x.useReducer)(function(e,t){return Object(j.a)(Object(j.a)({},e),t)},v),e=Object(h.a)(e,2),d=e[0],b=e[1];return Object(x.useEffect)(function(){return d==v||b(v)},[c]),Object(x.useEffect)(function(){Object(p.a)(u.a.mark(function e(){var t,n,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=g(d.I.bond,c.bond.decimals)).eq(d.input.bond)){e.next=6;break}return e.next=4,c.ct.get_dy(t).catch(function(e){return d.I.bond.length>d.old.bond.length&&d.I.bond.length<y(d.input.bond).length&&i.notify("balance","insufficient"),!1});case 4:(n=e.sent)&&(s={fee:(y(n,c.want.decimals)*(1-y(o.swap.fee))).toFixed(4),min:(.995*y(n,c.want.decimals)).toFixed(3),slip:i.calc_slip(o,[t,null],c).toPrecision(3),apy:o.apy.toPrecision(3)},b({input:{bond:t},output:{want:n},tip:s}));case 6:case"end":return e.stop()}},e)}))()},[d.I]),Object(x.useMemo)(function(){return Object(O.jsxs)("div",{className:r.root,children:[Object(O.jsxs)("div",{className:r.amount,children:[Object(O.jsx)("div",{children:Object(O.jsx)(m.a,{title:"bond",State:{state:d,setState:b,token:n,max:o.balance.bond,if_max:o.allowance.bond.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(O.jsx)("span",{className:r.icon,children:"navigate_next"}),Object(O.jsx)("div",{children:Object(O.jsx)(m.c,{title:"want",state:{state:d,token:s},style:{height:"90px"}})})]}),Object(O.jsx)(m.d,{apy:d.tip.apy,info:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:["Slippage tolerance: ",d.tip.slip," %"]}),Object(O.jsxs)("div",{children:["Minimum recieved: ",d.tip.min," ",s.symbol]}),Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(O.jsx)("span",{children:n.symbol}),Object(O.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(O.jsx)("span",{children:a.symbol}),Object(O.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(O.jsx)("span",{children:s.symbol})]}),Object(O.jsxs)("div",{children:["Nominal swap fee: ",d.tip.fee," ",s.symbol]})]})}),Object(O.jsx)("div",{className:r.buttonOne,children:Object(O.jsxs)("div",{children:[Object(O.jsx)(m.j,{name:"Approve",onClick:function(){return l("approve")(n)},disabled:!c.ct.signer||o.allowance.bond.gt("100000000000000000000000000000000")}),Object(O.jsx)(m.j,{name:"Deposit & Borrow",onClick:Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("borrow")(d.input.bond,d.output.want);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=b({I:{bond:""}});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)})),disabled:w.eq(d.output.want)||g(d.I.bond,c.bond.decimals).gt(o.balance.bond)||!g(d.I.bond,c.bond.decimals).eq(d.input.bond)})]})})]})},[d,o])}}}]);