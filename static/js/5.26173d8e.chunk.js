(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[5],{440:function(t,e,c){"use strict";c.r(e),c.d(e,"default",(function(){return h}));var n=c(2),a=c.n(n),s=c(13),i=c(20),l=c(24),r=c(31),o=c(0),p=c(16),u=c(32),d=c(1),b=r.a.constants.Zero,j={input:{clpt:b},output:{want:b,coll:b},tip:{share:"0.000",poolBalance:"0.00",fee:"0.0000",rate:{coll:0,want:0}},I:{clpt:""},old:{clpt:""}},x=function(t,e){return r.a.utils.formatUnits(t,e||18)},f=function(t,e){return r.a.utils.parseUnits(t||"0",e||18)};function h(){var t=Object(o.useContext)(p.d).state,e=(t.signer,t.controller),c=Object(o.useContext)(p.e),n=c.liteState,r=(n.bond,n.want),h=n.coll,O=n.pool,w=n.data,m=c.classesChild,v=c.handleClick,k=Object(o.useReducer)((function(t,e){return Object(i.a)(Object(i.a)({},t),e)}),j),C=Object(l.a)(k,2),g=C[0],I=C[1];return Object(o.useEffect)((function(){return g==j||I(j)}),[O]),Object(o.useEffect)((function(){Object(s.a)(a.a.mark((function t(){var c,n,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((c=f(g.I.clpt)).eq(g.input.clpt)){t.next=6;break}return t.next=4,O.ct.get_dxdy(c).catch((function(t){return e.notify("balance","insufficient"),!1}));case 4:(n=t.sent)&&(s={poolBalance:(x(w.swap.sx)/x(w.swap.sy,O.want.decimals)).toPrecision(3),share:(x(w.balance.clpt)/x(w.swap.sk)*100).toPrecision(3),rate:{coll:c.eq(b)?0:parseFloat(x(n[0])/g.I.clpt).toPrecision(3),want:c.eq(b)?0:parseFloat(x(n[1],O.want.decimals)/g.I.clpt).toPrecision(3)},fee:(x(n[0])*(1-x(w.swap.fee))).toFixed(4)},I({input:{clpt:c},output:{coll:n[0],want:n[1]},tip:s}));case 6:case"end":return t.stop()}}),t)})))()}),[g]),Object(o.useMemo)((function(){return Object(d.jsxs)("div",{className:m.root,children:[Object(d.jsxs)("div",{className:m.amount,children:[Object(d.jsx)("div",{children:Object(d.jsx)(u.a,{title:"clpt",State:{state:g,setState:I,token:O,max:w.balance.clpt,if_max:w.balance.clpt.gt("0")},style:{height:"239px"}})}),Object(d.jsx)("span",{className:m.icon,children:"navigate_next"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(u.c,{title:"want",state:{state:g,token:r},style:{height:"90px"}}),Object(d.jsx)(u.c,{title:"coll",state:{state:g,token:h},style:{height:"90px"}})]})]}),Object(d.jsx)(u.d,{apy:"todo",info:Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:["Exchange Rate: ","1CLPT = ".concat(g.tip.rate.want," ").concat(r.symbol," + ").concat(g.tip.rate.coll," COLL")]}),Object(d.jsxs)("div",{children:["Share of Pool: ",g.tip.share," %"]}),Object(d.jsxs)("div",{children:["Pool Balance: ","1 ".concat(r.symbol," = ").concat(g.tip.poolBalance," COLL")]}),Object(d.jsxs)("div",{children:["Nominal swap fee: ",g.tip.fee," COLL"]})]})}),Object(d.jsxs)("div",{className:m.buttonTwo,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)(u.j,{name:"Withdraw",onClick:Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("withdraw")(g.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=I({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),disabled:b.eq(g.output.want)||f(g.I.clpt).gt(w.balance.clpt)||!f(g.I.clpt).eq(g.input.clpt)}),Object(d.jsx)(u.j,{name:"Claim",onClick:function(){return v("claim")()},disabled:b.eq(w.earned.collar)})]}),Object(d.jsx)("div",{children:Object(d.jsx)(u.j,{name:"Withdraw & Claim",onClick:Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("burn_and_claim")(g.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=I({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),disabled:b.eq(g.output.want)||b.eq(w.earned.collar)||f(g.I.clpt).gt(w.balance.clpt)||!f(g.I.clpt).eq(g.input.clpt)})})]})]})}),[g,w])}}}]);