(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[3],{287:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var t=n(3),p=n.n(t),j=n(6),b=n(11),x=n(15),O=n(20),f=n(0),h=n(8),m=n(17),w=n(27),v=n(1),y=O.ethers.constants.Zero,k={input:{want:y},output:{coll:y},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{want:""},old:{want:""}},g=function(e,t){return O.ethers.utils.formatUnits(e,t||18)};function s(){var e=Object(f.useContext)(h.d).state,t=e.signer,i=e.controller,n=Object(f.useContext)(h.e),e=n.liteState,s=(e.bond,e.want),a=e.coll,r=e.pool,l=e.data,c=n.classesChild,o=(n.setLiteState,n.handleClick);k.tip.apy=l.apy.toPrecision(3);var n=Object(f.useReducer)(function(e,t){return Object(b.a)(Object(b.a)({},e),t)},k),n=Object(x.a)(n,2),u=n[0],d=n[1];return Object(f.useEffect)(function(){return u==k||d(k)},[r]),Object(f.useEffect)(function(){t&&!y.eq(l.swap.sk)&&Object(j.a)(p.a.mark(function e(){var s,a,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.I.want,n=r.want.decimals,(s=O.ethers.utils.parseUnits(t||"0",n||18)).eq(u.input.want)){e.next=6;break}return e.next=4,i.get_dx(s,r);case 4:(a=e.sent)&&(c={fee:(g(a)*(1-g(l.swap.fee))).toFixed(4),min:(.995*g(a)).toFixed(3),slip:i.calc_slip(l,[null,s],r).toPrecision(3),apy:l.apy.toPrecision(3)},d({input:{want:s},output:{coll:a},tip:c}));case 6:case"end":return e.stop()}var t,n},e)}))()},[u]),Object(f.useMemo)(function(){return Object(v.jsxs)("div",{className:c.root,children:[Object(v.jsxs)("div",{className:c.amount,children:[Object(v.jsx)("div",{children:Object(v.jsx)(m.a,{title:"want",State:{state:u,setState:d,token:s,max:l.balance.want,if_max:l.allowance.want.gt("100000000000000000000000000000000")},style:{height:"90px"}})}),Object(v.jsx)("img",{alt:"",src:w.b,className:c.icon}),Object(v.jsx)("div",{children:Object(v.jsx)(m.c,{title:"coll",state:{state:u,token:a},style:{height:"90px"}})})]}),Object(v.jsx)(m.d,{apy:u.tip.apy,info:Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{children:["Slippage tolerance: ",u.tip.slip," %"]}),Object(v.jsxs)("div",{children:["Minimum recieved: ",u.tip.min," COLL"]}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(v.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(v.jsx)("span",{children:s.symbol}),Object(v.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(v.jsx)("span",{children:a.symbol})]}),Object(v.jsxs)("div",{children:["Nominal swap fee: ",u.tip.fee," COLL"]})]})}),Object(v.jsx)("div",{className:c.buttonOne,children:Object(v.jsxs)("div",{children:[Object(v.jsx)(m.j,{name:"Approve",onClick:function(){return o("approve")(s.addr)},disabled:!t||l.allowance.want.gt("100000000000000000000000000000000")}),Object(v.jsx)(m.j,{name:"Lend",onClick:Object(j.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("lend")(u.input.want,u.output.coll);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=d({I:{want:""}});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)})),disabled:y.eq(u.output.coll)})]})})]})},[u,l])}}}]);