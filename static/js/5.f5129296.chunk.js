(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[5],{440:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return O}));var c=a(2),n=a.n(c),s=a(13),i=a(20),r=a(24),l=a(31),o=a(0),u=a(16),p=a(32),d=a(46),j=a(1),b=l.a.constants.Zero,x={input:{clpt:b},output:{want:b,coll:b},tip:{share:"0.000",poolBalance:"0.00",fee:"0.0000",rate:{coll:0,want:0}},I:{clpt:""},old:{clpt:""}},f=function(t,e){return l.a.utils.formatUnits(t,e||18)};function O(){var t=Object(o.useContext)(u.d).state.signer,e=Object(o.useContext)(u.e),a=e.liteState,c=(a.bond,a.want),O=a.coll,h=a.pool,w=a.data,m=e.classesChild,v=(e.setLiteState,e.handleClick),k=Object(o.useReducer)((function(t,e){return Object(i.a)(Object(i.a)({},t),e)}),x),C=Object(r.a)(k,2),g=C[0],q=C[1];return Object(o.useEffect)((function(){return g==x||q(x)}),[h]),Object(o.useEffect)((function(){t&&!b.eq(w.swap.sk)&&Object(s.a)(n.a.mark((function t(){var e,a,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=g.I.clpt,s=void 0,(e=l.a.utils.parseUnits(n||"0",s||18)).eq(g.input.clpt)){t.next=7;break}return t.next=4,h.ct.get_dxdy(e);case 4:a=t.sent,c={poolBalance:(f(w.swap.sx)/f(w.swap.sy,h.want.decimals)).toPrecision(3),share:(f(w.balance.clpt)/f(w.swap.sk)*100).toPrecision(3),rate:{coll:e.eq(b)?0:parseFloat(f(a[0])/g.I.clpt).toPrecision(3),want:e.eq(b)?0:parseFloat(f(a[1],h.want.decimals)/g.I.clpt).toPrecision(3)},fee:(f(a[0])*(1-f(w.swap.fee))).toFixed(4)},q({input:{clpt:e},output:{coll:a[0],want:a[1]},tip:c});case 7:case"end":return t.stop()}var n,s}),t)})))()}),[g]),Object(o.useMemo)((function(){return Object(j.jsxs)("div",{className:m.root,children:[Object(j.jsxs)("div",{className:m.amount,children:[Object(j.jsx)("div",{children:Object(j.jsx)(p.a,{title:"clpt",State:{state:g,setState:q,token:h,max:w.balance.clpt,if_max:w.balance.clpt.gt("0")},style:{height:"239px"}})}),Object(j.jsx)("img",{alt:"",src:d.b,className:m.icon}),Object(j.jsxs)("div",{children:[Object(j.jsx)(p.c,{title:"want",state:{state:g,token:c},style:{height:"90px"}}),Object(j.jsx)(p.c,{title:"coll",state:{state:g,token:O},style:{height:"90px"}})]})]}),Object(j.jsx)(p.d,{apy:"todo",info:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["Exchange Rate: ","1CLPT = ".concat(g.tip.rate.want," ").concat(c.symbol," + ").concat(g.tip.rate.coll," COLL")]}),Object(j.jsxs)("div",{children:["Share of Pool: ",g.tip.share," %"]}),Object(j.jsxs)("div",{children:["Pool Balance: ","1 ".concat(c.symbol," = ").concat(g.tip.poolBalance," COLL")]}),Object(j.jsxs)("div",{children:["Nominal swap fee: ",g.tip.fee," COLL"]})]})}),Object(j.jsxs)("div",{className:m.buttonTwo,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(p.j,{name:"Withdraw",onClick:Object(s.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("withdraw")(g.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=q({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),disabled:b.eq(g.output.want)}),Object(j.jsx)(p.j,{name:"Claim",onClick:function(){return v("claim")()},disabled:b.eq(w.earned.collar)})]}),Object(j.jsx)("div",{children:Object(j.jsx)(p.j,{name:"Withdraw & Claim",onClick:Object(s.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("burn_and_claim")(g.input.clpt);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0=q({I:{clpt:""}});case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)}))),disabled:b.eq(g.output.want)||b.eq(w.earned.collar)})})]})]})}),[g,w])}}}]);