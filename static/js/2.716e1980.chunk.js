(this.webpackJsonprebuild=this.webpackJsonprebuild||[]).push([[2],{308:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var t=n(3),d=n.n(t),p=n(7),j=n(10),b=n(11),c=n(18),x=n(0),h=n(6),f=n(16),O=n(1),m=c.ethers.constants.Zero,v={input:{coll:m},output:{want:m},tip:{fee:"0.0000",min:"0.000",slip:"0.00"},I:{coll:""},old:{coll:""}},y=function(e,t){return c.ethers.utils.formatUnits(e,t||18)},w=function(e,t){return c.ethers.utils.parseUnits(e||"0",t||18)};function i(){var e=Object(x.useContext)(h.d).state,i=(e.signer,e.controller),t=Object(x.useContext)(h.e),e=t.liteState,n=(e.bond,e.want),c=e.coll,s=e.pool,l=e.data,a=t.classesChild,r=t.handleClick;v.tip.apy=l.apy.toPrecision(3);var t=Object(x.useReducer)(function(e,t){return Object(j.a)(Object(j.a)({},e),t)},v),t=Object(b.a)(t,2),o=t[0],u=t[1];return Object(x.useEffect)(function(){return o==v||u(v)},[s]),Object(x.useEffect)(function(){Object(p.a)(d.a.mark(function e(){var t,n,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=w(o.I.coll)).eq(o.input.coll)){e.next=6;break}return e.next=4,s.ct.get_dy(t).catch(function(){return o.I.coll.length>o.old.coll.length&&o.I.coll.length<y(o.input.coll).length&&i.notify("balance","insufficient"),!1});case 4:(n=e.sent)&&(c={fee:(y(n,s.want.decimals)*(1-y(l.swap.fee))).toFixed(4),min:(.995*y(n,s.want.decimals)).toFixed(3),slip:i.calc_slip(l,[null,n],s).toPrecision(3),apy:l.apy.toPrecision(3)},u({input:{coll:t},output:{want:n},tip:c}));case 6:case"end":return e.stop()}},e)}))()},[o]),Object(x.useMemo)(function(){return Object(O.jsxs)("div",{className:a.root,children:[Object(O.jsxs)("div",{className:a.amount,children:[Object(O.jsx)("div",{children:Object(O.jsx)(f.a,{title:"coll",State:{state:o,setState:u,token:c,max:l.balance.coll,if_max:l.balance.coll.gt("0")},style:{height:"90px"}})}),Object(O.jsx)("span",{className:a.icon,children:"navigate_next"}),Object(O.jsx)("div",{children:Object(O.jsx)(f.c,{title:"want",state:{state:o,token:n},style:{height:"90px"}})})]}),Object(O.jsx)(f.d,{apy:o.tip.apy,info:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:["Slippage tolerance: ",o.tip.slip," %"]}),Object(O.jsxs)("div",{children:["Minimum recieved: ",o.tip.min," ",n.symbol]}),Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsx)("span",{style:{marginRight:"5px"},children:"Route:"}),Object(O.jsx)("span",{children:c.symbol}),Object(O.jsx)("span",{className:"material-icons",children:"keyboard_double_arrow_right"}),Object(O.jsx)("span",{children:n.symbol})]}),Object(O.jsxs)("div",{children:["Nominal swap fee: ",o.tip.fee," ",n.symbol]})]})}),Object(O.jsx)("div",{className:a.buttonOne,children:Object(O.jsxs)("div",{children:[Object(O.jsx)(f.j,{name:"Approve",disabled:!0}),Object(O.jsx)(f.j,{name:"Exit",onClick:Object(p.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("redeem")(o.output.want,o.input.coll);case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=u({I:{coll:""}});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)})),disabled:m.eq(o.output.want)||w(o.I.coll).gt(l.balance.coll)||!w(o.I.coll).eq(o.input.coll)})]})})]})},[o,l])}}}]);